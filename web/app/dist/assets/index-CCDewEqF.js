(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Cn=!1,_n=(e,t)=>e===t,kn=Symbol("solid-track"),ct={equals:_n};let Ht=qt;const Pe=1,dt=2,Xt={owned:null,cleanups:null,context:null,owner:null};var V=null;let yt=null,Mn=null,D=null,Q=null,Se=null,gt=0;function Xe(e,t){const n=D,o=V,r=e.length===0,i=t===void 0?o:t,s=r?Xt:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=r?e:()=>e(()=>Ae(()=>Je(s)));V=s,D=null;try{return Fe(a,!0)}finally{D=n,V=o}}function m(e,t){t=t?Object.assign({},ct,t):ct;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},o=r=>(typeof r=="function"&&(r=r(n.value)),Jt(n,r));return[Kt.bind(n),o]}function A(e,t,n){const o=Ct(e,t,!1,Pe);qe(o)}function le(e,t,n){Ht=Tn;const o=Ct(e,t,!1,Pe);(!n||!n.render)&&(o.user=!0),Se?Se.push(o):qe(o)}function Me(e,t,n){n=n?Object.assign({},ct,n):ct;const o=Ct(e,t,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,qe(o),Kt.bind(o)}function Ae(e){if(D===null)return e();const t=D;D=null;try{return e()}finally{D=t}}function An(e){le(()=>Ae(e))}function me(e){return V===null||(V.cleanups===null?V.cleanups=[e]:V.cleanups.push(e)),e}function Pn(){return V}function En(e,t){const n=V,o=D;V=e,D=null;try{return Fe(t,!0)}catch(r){_t(r)}finally{V=n,D=o}}function Kt(){if(this.sources&&this.state)if(this.state===Pe)qe(this);else{const e=Q;Q=null,Fe(()=>ft(this),!1),Q=e}if(D){const e=this.observers?this.observers.length:0;D.sources?(D.sources.push(this),D.sourceSlots.push(e)):(D.sources=[this],D.sourceSlots=[e]),this.observers?(this.observers.push(D),this.observerSlots.push(D.sources.length-1)):(this.observers=[D],this.observerSlots=[D.sources.length-1])}return this.value}function Jt(e,t,n){let o=e.value;return(!e.comparator||!e.comparator(o,t))&&(e.value=t,e.observers&&e.observers.length&&Fe(()=>{for(let r=0;r<e.observers.length;r+=1){const i=e.observers[r],s=yt&&yt.running;s&&yt.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?Q.push(i):Se.push(i),i.observers&&Yt(i)),s||(i.state=Pe)}if(Q.length>1e6)throw Q=[],new Error},!1)),t}function qe(e){if(!e.fn)return;Je(e);const t=gt;Rn(e,e.value,t)}function Rn(e,t,n){let o;const r=V,i=D;D=V=e;try{o=e.fn(t)}catch(s){return e.pure&&(e.state=Pe,e.owned&&e.owned.forEach(Je),e.owned=null),e.updatedAt=n+1,_t(s)}finally{D=i,V=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Jt(e,o):e.value=o,e.updatedAt=n)}function Ct(e,t,n,o=Pe,r){const i={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:V,context:V?V.context:null,pure:n};return V===null||V!==Xt&&(V.owned?V.owned.push(i):V.owned=[i]),i}function ut(e){if(e.state===0)return;if(e.state===dt)return ft(e);if(e.suspense&&Ae(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<gt);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Pe)qe(e);else if(e.state===dt){const o=Q;Q=null,Fe(()=>ft(e,t[0]),!1),Q=o}}function Fe(e,t){if(Q)return e();let n=!1;t||(Q=[]),Se?n=!0:Se=[],gt++;try{const o=e();return Ln(n),o}catch(o){n||(Se=null),Q=null,_t(o)}}function Ln(e){if(Q&&(qt(Q),Q=null),e)return;const t=Se;Se=null,t.length&&Fe(()=>Ht(t),!1)}function qt(e){for(let t=0;t<e.length;t++)ut(e[t])}function Tn(e){let t,n=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[n++]=o:ut(o)}for(t=0;t<n;t++)ut(e[t])}function ft(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];if(o.sources){const r=o.state;r===Pe?o!==t&&(!o.updatedAt||o.updatedAt<gt)&&ut(o):r===dt&&ft(o,t)}}}function Yt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=dt,n.pure?Q.push(n):Se.push(n),n.observers&&Yt(n))}}function Je(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),s=n.observerSlots.pop();o<r.length&&(i.sourceSlots[s]=o,r[o]=i,n.observerSlots[o]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Je(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Je(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Dn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function _t(e,t=V){throw Dn(e)}const Vn=Symbol("fallback");function Vt(e){for(let t=0;t<e.length;t++)e[t]()}function jn(e,t,n={}){let o=[],r=[],i=[],s=0,a=t.length>1?[]:null;return me(()=>Vt(i)),()=>{let l=e()||[],u=l.length,f,c;return l[kn],Ae(()=>{let p,C,S,P,z,I,W,G,K;if(u===0)s!==0&&(Vt(i),i=[],o=[],r=[],s=0,a&&(a=[])),n.fallback&&(o=[Vn],r[0]=Xe(he=>(i[0]=he,n.fallback())),s=1);else if(s===0){for(r=new Array(u),c=0;c<u;c++)o[c]=l[c],r[c]=Xe(b);s=u}else{for(S=new Array(u),P=new Array(u),a&&(z=new Array(u)),I=0,W=Math.min(s,u);I<W&&o[I]===l[I];I++);for(W=s-1,G=u-1;W>=I&&G>=I&&o[W]===l[G];W--,G--)S[G]=r[W],P[G]=i[W],a&&(z[G]=a[W]);for(p=new Map,C=new Array(G+1),c=G;c>=I;c--)K=l[c],f=p.get(K),C[c]=f===void 0?-1:f,p.set(K,c);for(f=I;f<=W;f++)K=o[f],c=p.get(K),c!==void 0&&c!==-1?(S[c]=r[f],P[c]=i[f],a&&(z[c]=a[f]),c=C[c],p.set(K,c)):i[f]();for(c=I;c<u;c++)c in S?(r[c]=S[c],i[c]=P[c],a&&(a[c]=z[c],a[c](c))):r[c]=Xe(b);r=r.slice(0,s=u),o=l.slice(0)}return r});function b(p){if(i[c]=p,a){const[C,S]=m(c);return a[c]=S,t(l[c],C)}return t(l[c])}}}function y(e,t){return Ae(()=>e(t||{}))}const Nn=e=>`Stale read from <${e}>.`;function Ue(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Me(jn(()=>e.each,e.children,t||void 0))}function j(e){const t=e.keyed,n=Me(()=>e.when,void 0,void 0),o=t?n:Me(n,void 0,{equals:(r,i)=>!r==!i});return Me(()=>{const r=o();if(r){const i=e.children;return typeof i=="function"&&i.length>0?Ae(()=>i(t?r:()=>{if(!Ae(o))throw Nn("Show");return n()})):i}return e.fallback},void 0,void 0)}const ye=e=>Me(()=>e());function zn(e,t,n){let o=n.length,r=t.length,i=o,s=0,a=0,l=t[r-1].nextSibling,u=null;for(;s<r||a<i;){if(t[s]===n[a]){s++,a++;continue}for(;t[r-1]===n[i-1];)r--,i--;if(r===s){const f=i<o?a?n[a-1].nextSibling:n[i-a]:l;for(;a<i;)e.insertBefore(n[a++],f)}else if(i===a)for(;s<r;)(!u||!u.has(t[s]))&&t[s].remove(),s++;else if(t[s]===n[i-1]&&n[a]===t[r-1]){const f=t[--r].nextSibling;e.insertBefore(n[a++],t[s++].nextSibling),e.insertBefore(n[--i],f),t[r]=n[i]}else{if(!u){u=new Map;let c=a;for(;c<i;)u.set(n[c],c++)}const f=u.get(t[s]);if(f!=null)if(a<f&&f<i){let c=s,b=1,p;for(;++c<r&&c<i&&!((p=u.get(t[c]))==null||p!==f+b);)b++;if(b>f-a){const C=t[s];for(;a<f;)e.insertBefore(n[a++],C)}else e.replaceChild(n[a++],t[s++])}else s++;else t[s++].remove()}}}const jt="_$DX_DELEGATE";function In(e,t,n,o={}){let r;return Xe(i=>{r=i,t===document?e():g(t,e(),t.firstChild?null:void 0,n)},o.owner),()=>{r(),t.textContent=""}}function x(e,t,n,o){let r;const i=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},s=()=>(r||(r=i())).cloneNode(!0);return s.cloneNode=s,s}function Ee(e,t=window.document){const n=t[jt]||(t[jt]=new Set);for(let o=0,r=e.length;o<r;o++){const i=e[o];n.has(i)||(n.add(i),t.addEventListener(i,On))}}function ke(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Ke(e,t){t==null?e.removeAttribute("class"):e.className=t}function Qt(e,t,n,o){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function N(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Ie(e,t,n){return Ae(()=>e(t,n))}function g(e,t,n,o){if(n!==void 0&&!o&&(o=[]),typeof t!="function")return ht(e,t,o,n);A(r=>ht(e,t(),r,n),o)}function On(e){let t=e.target;const n=`$$${e.type}`,o=e.target,r=e.currentTarget,i=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),s=()=>{const l=t[n];if(l&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?l.call(t,u,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},a=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();i(l[0]);for(let u=0;u<l.length-2&&(t=l[u],!!s());u++){if(t._$host){t=t._$host,a();break}if(t.parentNode===r)break}}else a();i(o)}function ht(e,t,n,o,r){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,s=o!==void 0;if(e=s&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(s){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=We(e,n,o,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=We(e,n,o);else{if(i==="function")return A(()=>{let a=t();for(;typeof a=="function";)a=a();n=ht(e,a,n,o)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(St(a,t,n,r))return A(()=>n=ht(e,a,n,o,!0)),()=>n;if(a.length===0){if(n=We(e,n,o),s)return n}else l?n.length===0?Nt(e,a,o):zn(e,n,a):(n&&We(e),Nt(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(s)return n=We(e,n,o,t);We(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function St(e,t,n,o){let r=!1;for(let i=0,s=t.length;i<s;i++){let a=t[i],l=n&&n[e.length],u;if(!(a==null||a===!0||a===!1))if((u=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))r=St(e,a,l)||r;else if(u==="function")if(o){for(;typeof a=="function";)a=a();r=St(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||r}else e.push(a),r=!0;else{const f=String(a);l&&l.nodeType===3&&l.data===f?e.push(l):e.push(document.createTextNode(f))}}return r}function Nt(e,t,n=null){for(let o=0,r=t.length;o<r;o++)e.insertBefore(t[o],n)}function We(e,t,n,o){if(n===void 0)return e.textContent="";const r=o||document.createTextNode("");if(t.length){let i=!1;for(let s=t.length-1;s>=0;s--){const a=t[s];if(r!==a){const l=a.parentNode===e;!i&&!s?l?e.replaceChild(r,a):e.insertBefore(r,n):l&&a.remove()}else i=!0}}else e.insertBefore(r,n);return[r]}const Bn="http://www.w3.org/2000/svg";function Wn(e,t=!1,n=void 0){return t?document.createElementNS(Bn,e):document.createElement(e,{is:n})}function Gn(e){const{useShadow:t}=e,n=document.createTextNode(""),o=()=>e.mount||document.body,r=Pn();let i;return le(()=>{i||(i=En(r,()=>Me(()=>e.children)));const s=o();if(s instanceof HTMLHeadElement){const[a,l]=m(!1),u=()=>l(!0);Xe(f=>g(s,()=>a()?f():i(),null)),me(u)}else{const a=Wn(e.isSVG?"g":"div",e.isSVG),l=t&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),g(l,i),s.appendChild(a),e.ref&&e.ref(a),me(()=>s.removeChild(a))}},void 0,{render:!0}),n}function Un(e,t){return window.go.adapters.App.AddCharacter(e,t)}function Fn(){return window.go.adapters.App.CloseProject()}function Hn(e){return window.go.adapters.App.CreateProject(e)}function Xn(e){return window.go.adapters.App.DeleteCharacter(e)}function Kn(e){return window.go.adapters.App.DeleteProject(e)}function Jn(e){return window.go.adapters.App.DeleteRecording(e)}function qn(e){return window.go.adapters.App.ExportRecordings(e)}function Yn(e){return window.go.adapters.App.GetAudioData(e)}function Qn(){return window.go.adapters.App.GetCurrentProject()}function Zn(){return window.go.adapters.App.GetMicrophoneGain()}function er(e){return window.go.adapters.App.GetRecordingWaveform(e)}function tr(){return window.go.adapters.App.GetSelectedDevice()}function zt(){return window.go.adapters.App.GetVideoURL()}function nr(){return window.go.adapters.App.ListDevices()}function rr(){return window.go.adapters.App.ListProjects()}function or(e){return window.go.adapters.App.OpenProject(e)}function ar(e,t){return window.go.adapters.App.RecordAudio(e,t)}function ir(e){return window.go.adapters.App.SelectDevice(e)}function lr(){return window.go.adapters.App.SelectVideo()}function sr(e){return window.go.adapters.App.SetMicrophoneGain(e)}function cr(){return window.go.adapters.App.StopRecording()}function dr(e,t,n){return window.go.adapters.App.UpdateCharacter(e,t,n)}function ur(e,t){return window.go.adapters.App.UpdateProjectTitle(e,t)}function fr(e,t){return window.go.adapters.App.UpdateRecordingGain(e,t)}function hr(e,t){return window.go.adapters.App.UpdateRecordingTimecode(e,t)}function gr(e,t){return window.go.adapters.App.UpdateRecordingVolume(e,t)}var It;(e=>{class t{static createFrom(o={}){return new t(o)}constructor(o={}){typeof o=="string"&&(o=JSON.parse(o)),this.format=o.format,this.characterVolumes=o.characterVolumes,this.masterVolume=o.masterVolume}}e.ExportOptions=t})(It||(It={}));var Ot;(e=>{class t{static createFrom(l={}){return new t(l)}constructor(l={}){typeof l=="string"&&(l=JSON.parse(l)),this.id=l.id,this.name=l.name,this.color=l.color}}e.Character=t;class n{static createFrom(l={}){return new n(l)}constructor(l={}){typeof l=="string"&&(l=JSON.parse(l)),this.devices_name=l.devices_name,this.id=l.id}}e.DeviceInfo=n;class o{static createFrom(l={}){return new o(l)}constructor(l={}){typeof l=="string"&&(l=JSON.parse(l)),this.id=l.id,this.character_id=l.character_id,this.file_path=l.file_path,this.timecode=l.timecode,this.duration=l.duration,this.volume=l.volume,this.gain_db=l.gain_db}}e.Recording=o;class r{static createFrom(l={}){return new r(l)}constructor(l={}){typeof l=="string"&&(l=JSON.parse(l)),this.id=l.id,this.file_name=l.file_name,this.file_path=l.file_path,this.thumbnail=l.thumbnail}}e.Video=r;class i{static createFrom(l={}){return new i(l)}constructor(l={}){typeof l=="string"&&(l=JSON.parse(l)),this.id=l.id,this.title=l.title,this.path=l.path,this.video=this.convertValues(l.video,r),this.characters=this.convertValues(l.characters,t),this.recordings=this.convertValues(l.recordings,o),this.created_at=this.convertValues(l.created_at,null),this.updated_at=this.convertValues(l.updated_at,null)}convertValues(l,u,f=!1){if(!l)return l;if(l.slice&&l.map)return l.map(c=>this.convertValues(c,u));if(typeof l=="object"){if(f){for(const c of Object.keys(l))l[c]=new u(l[c]);return l}return new u(l)}return l}}e.Project=i;class s{static createFrom(l={}){return new s(l)}constructor(l={}){typeof l=="string"&&(l=JSON.parse(l)),this.id=l.id,this.title=l.title,this.path=l.path,this.created_at=l.created_at,this.updated_at=l.updated_at}}e.ProjectMeta=s})(Ot||(Ot={}));var vr=x('<div class="text-center py-16"><div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-[#00d4ff] to-[#00ff88] flex items-center justify-center bubble-float opacity-60"><svg class="w-12 h-12 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=1.5 d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg></div><p class="text-slate-700 text-lg mb-2">No projects yet</p><p class="text-slate-600 text-sm">Create your first project to start recording'),mr=x('<div class="flex flex-col h-full bg-gradient-to-br from-[#0077b6] via-[#00b4d8] to-[#90e0ef] p-8"><div class="max-w-3xl mx-auto w-full"><div class="text-center mb-10"><h1 class="text-5xl font-extrabold aero-title mb-3 bubble-float">Viover</h1><p class="text-slate-700 text-sm font-medium tracking-wide">Voice Recording Studio for Video Projects</p></div><div class="aero-glass rounded-2xl p-6 mb-8"><div class="flex gap-3"><input type=text placeholder="Enter project name..."class="aero-input flex-1 px-5 py-3 text-white placeholder-gray-400"><button class="aero-button aero-button-primary px-8 py-3 font-semibold disabled:opacity-40 disabled:cursor-not-allowed"><span class="flex items-center gap-2"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Create</span></button></div></div><div class="flex-1 overflow-auto"><div class="grid gap-4"></div></div><div class="mt-8 text-center text-slate-600 text-xs"><span class=aero-badge>Space</span> Play/Pause<span class=mx-2>|</span><span class=aero-badge>R</span> Record<span class=mx-2>|</span><span class=aero-badge>C</span> Add Character'),pr=x('<div class="flex items-center gap-3"><input type=text autofocus class="aero-input flex-1 px-4 py-2 text-white"><button class="aero-button aero-button-primary px-5 py-2 font-medium">Save</button><button class="aero-button px-5 py-2 text-slate-800 font-medium">Cancel'),wr=x('<div class="aero-card p-5 group">'),xr=x('<div class="flex items-center gap-4"><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-[#00d4ff] to-[#00ff88] flex items-center justify-center shrink-0"><svg class="w-6 h-6 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div><div class="flex-1 cursor-pointer min-w-0"><div class="font-semibold text-slate-800 text-lg truncate"></div><div class="text-sm text-slate-700 truncate mt-0.5"></div></div><div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity"><button class="aero-button p-2.5 text-slate-800 hover:text-white"><svg class="w-4 h-4"fill=currentColor viewBox="0 0 20 20"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path></svg></button><button class="aero-button p-2.5 text-slate-800 hover:text-red-400"><svg class="w-4 h-4"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"clip-rule=evenodd>');function br(e){const[t,n]=m([]),[o,r]=m(""),[i,s]=m(null),[a,l]=m(""),[u,f]=m(!1),c=async()=>{const P=await rr();n(P||[])},b=async()=>{const P=o().trim();if(P){f(!0);try{const z=await Hn(P);z&&(r(""),e.onOpenProject(z.id))}finally{f(!1)}}},p=async P=>{confirm("Delete this project and all its files?")&&(await Kn(P),await c())},C=P=>{s(P.id),l(P.title)},S=async()=>{const P=i();P&&(await ur(P,a()),s(null),await c())};return c(),(()=>{var P=mr(),z=P.firstChild,I=z.firstChild,W=I.nextSibling,G=W.firstChild,K=G.firstChild,he=K.nextSibling,ce=W.nextSibling,pe=ce.firstChild;return K.$$keydown=J=>J.key==="Enter"&&b(),K.$$input=J=>r(J.currentTarget.value),he.$$click=b,g(ce,y(j,{get when(){return t().length===0},get children(){return vr()}}),pe),g(pe,y(Ue,{get each(){return t()},children:J=>(()=>{var Oe=wr();return g(Oe,y(j,{get when(){return i()===J.id},get fallback(){return(()=>{var re=xr(),q=re.firstChild,se=q.nextSibling,te=se.firstChild,de=te.nextSibling,Re=se.nextSibling,Le=Re.firstChild,Te=Le.nextSibling;return se.$$click=()=>e.onOpenProject(J.id),g(te,()=>J.title),g(de,()=>J.path),Le.$$click=()=>C(J),Te.$$click=()=>p(J.id),re})()},get children(){var re=pr(),q=re.firstChild,se=q.nextSibling,te=se.nextSibling;return q.$$keydown=de=>{de.key==="Enter"&&S(),de.key==="Escape"&&s(null)},q.$$input=de=>l(de.currentTarget.value),se.$$click=S,te.$$click=()=>s(null),A(()=>q.value=a()),re}})),Oe})()})),A(()=>he.disabled=u()||!o().trim()),A(()=>K.value=o()),P})()}Ee(["input","keydown","click"]);function $r(e,t,n){return window.runtime.EventsOnMultiple(e,t,n)}function Bt(e,t){return $r(e,t,-1)}var yr=x('<div class="aero-controls flex items-center gap-4 px-4 py-2.5"><button class="w-9 h-9 flex items-center justify-center text-white hover:text-[#ffcc00] transition-colors"></button><button class="w-9 h-9 flex items-center justify-center text-white hover:text-[#ffcc00] transition-colors"></button><input type=range min=0 max=1 step=0.1 class="aero-slider w-20 h-1.5 bg-white/20 rounded-full appearance-none cursor-pointer"><div class="ml-auto shrink-0 whitespace-nowrap font-mono text-sm"><span class="text-white font-semibold"></span><span class="text-white/40 mx-1">/</span><span class=text-white/60>'),Sr=x('<svg viewBox="0 0 24 24"class="w-6 h-6 fill-current"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z">'),Cr=x('<svg viewBox="0 0 24 24"class="w-6 h-6 fill-current"><path d="M8 5v14l11-7z">'),_r=x('<svg viewBox="0 0 24 24"class="w-5 h-5 fill-current"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z">'),kr=x('<svg viewBox="0 0 24 24"class="w-5 h-5 fill-current"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z">');function Wt(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%60),r=Math.floor(e%1*30);return t>0?`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}function Mr(e){const[t,n]=m(1),[o,r]=m(!1),i=a=>{const l=parseFloat(a.target.value);n(l),e.videoRef&&(e.videoRef.volume=l,r(l===0))},s=()=>{if(!e.videoRef)return;const a=!o();r(a),e.videoRef.muted=a};return(()=>{var a=yr(),l=a.firstChild,u=l.nextSibling,f=u.nextSibling,c=f.nextSibling,b=c.firstChild,p=b.nextSibling,C=p.nextSibling;return Qt(l,"click",e.onPlayPause),g(l,(()=>{var S=ye(()=>!!e.isPlaying);return()=>S()?Sr():Cr()})()),u.$$click=s,g(u,(()=>{var S=ye(()=>!!(o()||t()===0));return()=>S()?_r():kr()})()),f.$$input=i,g(b,()=>Wt(e.currentTime)),g(C,()=>Wt(e.duration)),A(()=>f.value=t()),a})()}Ee(["click","input"]);var Ar=x('<div class="relative h-6 bg-gradient-to-r from-[#48cae4] to-[#90e0ef] cursor-pointer select-none">'),Pr=x('<div class="absolute top-0 flex flex-col items-center"><div class="w-px h-2 bg-[#0077b6]"></div><span class="text-[10px] text-[#004d73] font-medium -translate-x-1/2">');function Er(e){const t=Math.floor(e/60),n=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function Rr(e){const t=Me(()=>{const o=e.duration||1,r=o>60?10:o>30?5:2,i=Math.floor(o/r)+1;return Array.from({length:i},(s,a)=>({time:a*r,position:a*r/o}))}),n=o=>{const r=o.currentTarget.getBoundingClientRect(),s=(o.clientX-r.left)/e.width*e.duration;e.onClick(Math.max(0,Math.min(s,e.duration)))};return(()=>{var o=Ar();return o.$$click=n,g(o,y(Ue,{get each(){return t()},children:r=>(()=>{var i=Pr(),s=i.firstChild,a=s.nextSibling;return g(a,()=>Er(r.time)),A(l=>N(i,"left",`${r.position*100}%`)),i})()})),o})()}Ee(["click"]);var Lr=x('<div class="playhead absolute top-0 bottom-0 w-0.5 bg-[#ff6b35] cursor-ew-resize z-20 shadow-lg"><div class="absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-[#ff6b35] rotate-45 shadow-md">');function Tr(e){let t=!1;const n=a=>{a.preventDefault(),a.stopPropagation(),t=!0,document.addEventListener("mousemove",r),document.addEventListener("mouseup",i)},o=10,r=a=>{if(!t||!e.containerRef)return;const l=e.containerRef.getBoundingClientRect(),u=a.clientX-l.left-e.sidebarWidth;let f=Math.max(0,Math.min(u/e.trackWidth,1));if(e.snapPoints&&e.duration){const c=f*e.duration,b=o/e.trackWidth*e.duration;for(const p of e.snapPoints)if(Math.abs(c-p)<=b){f=p/e.duration;break}}e.onDrag(f)},i=()=>{t=!1,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i)};me(()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i)});const s=()=>e.sidebarWidth+e.position*e.trackWidth;return(()=>{var a=Lr();return a.$$mousedown=n,A(l=>N(a,"left",`${s()}px`)),a})()}Ee(["mousedown"]);var Dr=x('<div class="h-3 bg-[#0096c7] cursor-pointer relative"><div class="absolute inset-x-2 top-1 bottom-1 bg-[#48cae4] rounded-full"><div class="thumb absolute top-0 bottom-0 bg-[#ff7f50] hover:bg-[#ff9f7a] rounded-full cursor-grab active:cursor-grabbing shadow-md">');function Vr(e){let t,n=!1,o=0,r=0;const i=()=>{if(!e.scrollRef)return 100;const b=e.scrollRef.clientWidth/e.contentWidth;return Math.max(b*100,10)},s=()=>{if(!e.scrollRef)return 0;const c=e.contentWidth-e.scrollRef.clientWidth;if(c<=0)return 0;const b=e.scrollPos/c,p=100-i();return b*p},a=c=>{if(!t||!e.scrollRef||c.target.closest(".thumb"))return;const b=t.getBoundingClientRect(),p=(c.clientX-b.left)/b.width,C=e.contentWidth-e.scrollRef.clientWidth;e.scrollRef.scrollLeft=p*C},l=c=>{c.preventDefault(),c.stopPropagation(),n=!0,o=c.clientX,r=e.scrollRef?.scrollLeft||0,document.addEventListener("mousemove",u),document.addEventListener("mouseup",f)},u=c=>{if(!n||!t||!e.scrollRef)return;const b=t.getBoundingClientRect(),C=(c.clientX-o)/b.width,S=e.contentWidth-e.scrollRef.clientWidth;e.scrollRef.scrollLeft=r+C*S},f=()=>{n=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f)};return me(()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f)}),(()=>{var c=Dr(),b=c.firstChild,p=b.firstChild;c.$$click=a;var C=t;return typeof C=="function"?Ie(C,c):t=c,p.$$mousedown=l,A(S=>{var P=`${s()}%`,z=`${i()}%`;return P!==S.e&&N(p,"left",S.e=P),z!==S.t&&N(p,"width",S.t=z),S},{e:void 0,t:void 0}),c})()}Ee(["click","mousedown"]);var jr=x('<canvas class="absolute inset-0 w-full h-full">'),Nr=x('<div class="aero-color-picker fixed p-3 grid grid-cols-4 gap-2 min-w-max"style=transform:translateY(-100%);z-index:9999>'),zr=x('<input type=text autofocus class="aero-input flex-1 px-2 py-1 text-sm text-white min-w-[200px]">'),Ir=x('<svg class="w-3.5 h-3.5"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z"clip-rule=evenodd>'),Or=x('<input type=range min=0 max=1 step=0.05 class="w-20 h-1 accent-current cursor-pointer">'),Br=x('<div><div class="character-sidebar group shrink-0 flex items-center gap-3 px-4 cursor-pointer transition-all hover:bg-white/10 overflow-visible sticky left-0 z-30 bg-white/60 backdrop-blur-md"><button class="absolute top-1 right-2 w-5 h-5 bg-gradient-to-br from-red-400 to-red-600 rounded-full text-white text-xs opacity-0 group-hover:opacity-100 flex items-center justify-center shadow-lg transition-opacity z-50 pointer-events-auto cursor-pointer"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"clip-rule=evenodd></path></svg></button><div class="relative overflow-visible"><div class="w-5 h-5 rounded-md cursor-pointer aero-color-swatch transition-transform hover:scale-110"></div></div><button></button><div class="absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-[#00d4ff] transition-colors"></div></div><div class="flex-1 relative">'),Wr=x('<div class="aero-color-swatch w-6 h-6 cursor-pointer">'),Gr=x('<span class="text-sm text-slate-800 truncate font-medium min-w-[100px] max-w-[300px]">'),Ur=x('<svg class="w-3.5 h-3.5"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414z"clip-rule=evenodd>'),Fr=x('<div><div class="absolute bottom-0 left-1 right-5 opacity-0 group-hover:opacity-100 transition-opacity z-10 flex flex-col gap-0.5"><div class="flex items-center gap-1"><span class="text-[8px] text-white/70 w-4">Vol</span><input type=range min=0 max=1 step=0.05 class="flex-1 h-1 accent-white cursor-pointer"></div><div class="flex items-center gap-1"><span class="text-[8px] text-white/70 w-4">dB</span><input type=range min=-12 max=12 step=0.5 class="flex-1 h-1 accent-[#ffaa00] cursor-pointer"></div></div><button class="absolute -top-1.5 -right-1.5 w-5 h-5 bg-gradient-to-br from-red-400 to-red-600 rounded-full text-white text-xs opacity-0 group-hover:opacity-100 flex items-center justify-center shadow-lg transition-opacity z-10 cursor-pointer"><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"clip-rule=evenodd>'),Hr=x('<div class="absolute top-2 bottom-2 rounded-md opacity-80"><div class="absolute right-1 top-1/2 -translate-y-1/2 w-2 h-2 bg-red-500 rounded-full animate-pulse">');const Xr=["#00ffcc","#00d4ff","#00ff88","#ffaa00","#ff7f7f","#cc99ff","#ffcc00","#ff99cc"];function Kr(e){let t;return le(()=>{if(!t||!e.peaks.length)return;const n=Math.floor(e.width),o=Math.floor(e.height);t.width=n,t.height=o;const r=t.getContext("2d");if(!r)return;r.clearRect(0,0,n,o),r.fillStyle=e.color;const i=Math.max(n/e.peaks.length,1),s=o/2,a=Math.max(...e.peaks,1);e.peaks.forEach((l,u)=>{const f=l/a*s*.9,c=u*i,b=Math.max(f,1);r.fillRect(c,s-b,i-.5,b*2)})}),(()=>{var n=jr(),o=t;return typeof o=="function"?Ie(o,n):t=n,n})()}function Jr(e){const[t,n]=m(!1),[o,r]=m(e.character.name),[i,s]=m(!1),[a,l]=m({}),[u,f]=m(null),[c,b]=m(0),[p,C]=m(0),[S,P]=m({top:0,left:0}),[z,I]=m(!1),[W,G]=m(0),[K,he]=m(0);let ce,pe;const J=()=>e.selectedCharacterId===e.character.id,Oe=10,re=E=>{if(!u())return;const U=E.clientX-c(),ne=e.recordings.find(we=>we.id===u());if(!ne)return;const oe=ne.timecode*e.pixelsPerSecond;let ue=Math.max(0,oe+U);const fe=e.currentTime*e.pixelsPerSecond;Math.abs(ue-fe)<=Oe&&(ue=fe),C(ue)},q=()=>{if(!u()||!e.onMoveRecording){f(null);return}const E=Math.max(0,p()/e.pixelsPerSecond);e.onMoveRecording(u(),E),f(null)};le(()=>{u()?(document.addEventListener("mousemove",re),document.addEventListener("mouseup",q)):(document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",q))});const se=E=>{if(!z()||!e.onSidebarResize)return;const U=E.clientX-W();e.onSidebarResize(K()+U)},te=()=>{I(!1)};le(()=>{z()?(document.addEventListener("mousemove",se),document.addEventListener("mouseup",te)):(document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",te))});const de=E=>{e.onSidebarResize&&(E.preventDefault(),E.stopPropagation(),I(!0),G(E.clientX),he(e.sidebarWidth??208))};me(()=>{document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",q),document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",te)});const Re=async()=>{const E={...a()};let U=!1;for(const ne of e.recordings)if(!E[ne.id])try{const oe=await er(ne.id);oe&&oe.length>0&&(E[ne.id]=oe,U=!0)}catch(oe){console.error("Failed to load waveform:",oe)}U&&l(E)};le(()=>{e.recordings.length>0&&Re()});const Le=()=>{e.onUpdateCharacter(o(),e.character.color),n(!1)},Te=E=>{e.onUpdateCharacter(e.character.name,E),s(!1)};return le(()=>{if(i()){const E=()=>s(!1);setTimeout(()=>document.addEventListener("click",E),0),me(()=>document.removeEventListener("click",E))}}),(()=>{var E=Br(),U=E.firstChild,ne=U.firstChild,oe=ne.nextSibling,ue=oe.firstChild,fe=oe.nextSibling,we=fe.nextSibling,Be=U.nextSibling;U.$$click=h=>{h.stopPropagation(),e.onSelect()},ne.$$click=h=>{h.stopPropagation(),h.preventDefault(),e.onDeleteCharacter()},ne.$$mousedown=h=>h.stopPropagation(),ue.$$click=h=>{if(h.stopPropagation(),pe){const w=pe.getBoundingClientRect();P({top:w.top-8,left:w.left})}s(!i())};var Ce=pe;typeof Ce=="function"?Ie(Ce,ue):pe=ue,g(oe,y(j,{get when(){return i()},get children(){return y(Gn,{get children(){var h=Nr();return h.$$click=w=>w.stopPropagation(),g(h,y(Ue,{each:Xr,children:w=>(()=>{var O=Wr();return O.$$click=F=>{F.stopPropagation(),Te(w)},N(O,"background-color",w),O})()})),A(w=>{var O=`${S().top}px`,F=`${S().left}px`;return O!==w.e&&N(h,"top",w.e=O),F!==w.t&&N(h,"left",w.t=F),w},{e:void 0,t:void 0}),h}})}}),null),g(U,y(j,{get when(){return t()},get fallback(){return(()=>{var h=Gr();return h.$$dblclick=w=>{w.stopPropagation(),r(e.character.name),n(!0)},g(h,()=>e.character.name),A(()=>ke(h,"title",e.character.name)),h})()},get children(){var h=zr();return h.$$click=w=>w.stopPropagation(),h.addEventListener("blur",Le),h.$$keydown=w=>{w.key==="Enter"&&Le(),w.key==="Escape"&&n(!1)},h.$$input=w=>r(w.currentTarget.value),A(()=>h.value=o()),h}}),fe),fe.$$click=h=>{h.stopPropagation(),e.onMuteToggle?.()},g(fe,y(j,{get when(){return e.isMuted},get fallback(){return Ur()},get children(){return Ir()}})),g(U,y(j,{get when(){return J()},get children(){var h=Or();return h.$$click=w=>w.stopPropagation(),h.$$input=w=>{w.stopPropagation(),e.onVolumeChange?.(parseFloat(w.currentTarget.value))},A(w=>{var O=e.character.color,F=`Volume: ${Math.round((e.volume??1)*100)}%`;return O!==w.e&&N(h,"color",w.e=O),F!==w.t&&ke(h,"title",w.t=F),w},{e:void 0,t:void 0}),A(()=>h.value=e.volume??1),h}}),we),we.$$click=h=>h.stopPropagation(),we.$$mousedown=de;var Ye=ce;return typeof Ye=="function"?Ie(Ye,Be):ce=Be,g(Be,y(Ue,{get each(){return e.recordings},children:h=>{const w=()=>h.timecode*e.pixelsPerSecond,O=()=>Math.max(h.duration*e.pixelsPerSecond,24),F=()=>a()[h.id]||[],M=()=>u()===h.id,T=()=>M()?p():w(),ae=B=>{e.onMoveRecording&&(B.preventDefault(),B.stopPropagation(),f(h.id),b(B.clientX),C(w()))};return(()=>{var B=Fr(),De=B.firstChild,ie=De.firstChild,vt=ie.firstChild,Ve=vt.nextSibling,Qe=ie.nextSibling,Ze=Qe.firstChild,je=Ze.nextSibling,mt=De.nextSibling;return B.$$mousedown=ae,g(B,y(j,{get when(){return F().length>0},get children(){return y(Kr,{get peaks(){return F()},get width(){return O()},height:40,color:"rgba(255,255,255,0.6)"})}}),De),Ve.$$click=_=>_.stopPropagation(),Ve.$$mousedown=_=>_.stopPropagation(),Ve.$$input=_=>{_.stopPropagation(),e.onRecordingVolumeChange?.(h.id,parseFloat(_.currentTarget.value))},je.$$click=_=>_.stopPropagation(),je.$$mousedown=_=>_.stopPropagation(),je.$$input=_=>{_.stopPropagation(),e.onRecordingGainChange?.(h.id,parseFloat(_.currentTarget.value))},mt.$$click=_=>{_.stopPropagation(),e.onDeleteRecording(h.id)},A(_=>{var et=`aero-recording absolute top-2 bottom-2 group ${M()?"cursor-grabbing z-30 opacity-80":"cursor-grab z-10"}`,tt=`${T()}px`,nt=`${O()}px`,rt=e.character.color,ot=`Volume: ${Math.round((h.volume??1)*100)}%`,at=`Gain: ${(h.gain_db??0).toFixed(1)} dB`;return et!==_.e&&Ke(B,_.e=et),tt!==_.t&&N(B,"left",_.t=tt),nt!==_.a&&N(B,"width",_.a=nt),rt!==_.o&&N(B,"background-color",_.o=rt),ot!==_.i&&ke(Ve,"title",_.i=ot),at!==_.n&&ke(je,"title",_.n=at),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),A(()=>Ve.value=h.volume??1),A(()=>je.value=h.gain_db??0),B})()}}),null),g(Be,y(j,{get when(){return ye(()=>!!(J()&&e.isRecording))()&&e.recordingStartTime!==void 0},get children(){return(()=>{const h=e.recordingStartTime,w=Math.max(0,e.currentTime-h),O=h*e.pixelsPerSecond,F=Math.max(w*e.pixelsPerSecond,4);return(()=>{var M=Hr();return N(M,"left",`${O}px`),N(M,"width",`${F}px`),A(T=>{var ae=e.character.color,B=`0 0 10px ${e.character.color}`;return ae!==T.e&&N(M,"background-color",T.e=ae),B!==T.t&&N(M,"box-shadow",T.t=B),T},{e:void 0,t:void 0}),M})()})()}}),null),A(h=>{var w=`aero-track flex h-14 overflow-visible ${J()?"selected":""} ${e.isMuted?"opacity-50":""}`,O=`${e.sidebarWidth??208}px`,F=e.character.color,M=`aero-button p-1.5 transition-colors ${e.isMuted?"text-red-400":"text-slate-700 hover:text-white"}`,T=e.isMuted?"Unmute":"Mute",ae=z()?"#00d4ff":"rgba(255,255,255,0.1)";return w!==h.e&&Ke(E,h.e=w),O!==h.t&&N(U,"width",h.t=O),F!==h.a&&N(ue,"background-color",h.a=F),M!==h.o&&Ke(fe,h.o=M),T!==h.i&&ke(fe,"title",h.i=T),ae!==h.n&&N(we,"background-color",h.n=ae),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),E})()}Ee(["click","mousedown","input","keydown","dblclick"]);var qr=x('<div class="absolute inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center"><div class=text-center><div class="text-9xl font-bold text-white animate-pulse"style="text-shadow:0 0 60px rgba(0, 212, 255, 0.9)"></div><button class="mt-12 aero-button px-8 py-3 text-lg font-medium text-slate-800">Cancel');function Yr(e){const[t,n]=m(3);return le(()=>{if(t()===0){e.onComplete();return}const o=setTimeout(()=>n(r=>r-1),1e3);me(()=>clearTimeout(o))}),(()=>{var o=qr(),r=o.firstChild,i=r.firstChild,s=i.nextSibling;return g(i,(()=>{var a=ye(()=>t()>0);return()=>a()?t():"GO!"})()),Qt(s,"click",e.onCancel),o})()}Ee(["click"]);const ee=new Map,ze=new Set;let Ge=null;function Qr(){return Ge||(Ge=new AudioContext),Ge}function Zr(e){return Math.pow(10,e/20)}window.audioDebug={getCache:()=>ee,playFirst:()=>{const e=ee.values().next().value;e?(console.log("[AudioDebug] Playing first cached audio:",e.recordingId),e.element.currentTime=0,e.gainNode&&(e.gainNode.gain.value=1),e.element.play().then(()=>console.log("[AudioDebug] Playing!")).catch(t=>console.error("[AudioDebug] Error:",t))):console.log("[AudioDebug] No audio in cache")},listAll:()=>{ee.forEach((e,t)=>{console.log("[AudioDebug]",t,"- ready:",e.isReady,"duration:",e.duration,"timecode:",e.timecode)})}};function eo(e){const[t,n]=m(0);le(()=>{console.log("[AudioManager] Props update - isPlaying:",e.isPlaying,"currentTime:",e.currentTime?.toFixed(2),"recordings:",e.recordings?.length)});const o=async r=>{if(!(ee.has(r.id)||ze.has(r.id))){ze.add(r.id);try{console.log("[AudioManager] Loading audio for",r.id);let i=null;try{i=await Yn(r.id)}catch(f){console.error("[AudioManager] GetAudioData threw error:",f)}if(console.log("[AudioManager] GetAudioData returned base64 string, length:",i?.length),!i||i.length===0){console.error("[AudioManager] No audio data for",r.id),ze.delete(r.id);return}const s=`data:audio/wav;base64,${i}`;console.log("[AudioManager] Data URL created, length:",s.length);const a=new Audio;a.preload="auto";const l={base64Length:i.length,audioUrl:s.substring(0,100)+"..."},u={element:a,audioUrl:s,isReady:!1,recordingId:r.id,timecode:r.timecode,duration:r.duration,source:null,gainNode:null};a.oncanplaythrough=()=>{console.log("[AudioManager] Audio ready for",r.id,"audioDuration:",a.duration,"recordingDuration:",r.duration),u.isReady=!0,u.duration=a.duration||r.duration;try{const f=Qr();u.source||(u.source=f.createMediaElementSource(a),u.gainNode=f.createGain(),u.source.connect(u.gainNode),u.gainNode.connect(f.destination))}catch(f){console.error("[AudioManager] Failed to create Web Audio nodes:",f)}n(f=>f+1),u.gainNode&&(u.gainNode.gain.value=.5),console.log("[AudioManager] TEST: Attempting to play audio to verify it works..."),a.play().then(()=>{console.log("[AudioManager] TEST: Audio CAN play! Pausing test playback."),setTimeout(()=>a.pause(),500)}).catch(f=>{console.error("[AudioManager] TEST: Audio CANNOT play:",f.message||f)})},a.onerror=()=>{const f=a.error;console.error("[AudioManager] Audio load error for",r.id),console.error("[AudioManager] Error code:",f?.code,"- 1=ABORTED, 2=NETWORK, 3=DECODE, 4=SRC_NOT_SUPPORTED"),console.error("[AudioManager] Error message:",f?.message),console.error("[AudioManager] Audio URL prefix:",l.audioUrl),console.error("[AudioManager] Base64 length was:",l.base64Length)},a.src=s,ee.set(r.id,u),ze.delete(r.id)}catch(i){console.error("[AudioManager] Failed to load audio:",i),ze.delete(r.id)}}};return le(()=>{const r=e.recordings,i=new Set(r.map(s=>s.id));console.log("[AudioManager] Recordings changed - count:",r.length,"cached:",ee.size),r.forEach((s,a)=>{console.log(`[AudioManager] Recording[${a}]:`,s.id,"path:",s.file_path,"timecode:",s.timecode,"duration:",s.duration)}),ee.forEach((s,a)=>{i.has(a)||(console.log("[AudioManager] Removing stale audio:",a),s.element.pause(),s.element.src="",ee.delete(a))}),r.forEach(s=>{!ee.has(s.id)&&!ze.has(s.id)&&console.log("[AudioManager] Will load new recording:",s.id),o(s)})}),le(()=>{t();const r=e.masterVolume??1,i=e.characterVolumes??{},s=e.mutedCharacters??{},a=e.recordingGains??{};e.recordings.forEach(l=>{const u=ee.get(l.id);if(!u||!u.gainNode)return;const f=s[l.character_id]??!1,c=i[l.character_id]??1,b=l.volume??1,p=a[l.id]??l.gain_db??0,C=Zr(p),S=f?0:r*c*b*C;Math.abs(u.gainNode.gain.value-S)>.001&&(console.log("[AudioManager] Setting gain for",l.id,"to",S.toFixed(3),"(master:",r,"char:",c,"rec:",b,"gainDB:",p,"muted:",f,")"),u.gainNode.gain.value=S)})}),le(()=>{t();const r=e.currentTime,i=e.isPlaying,s=e.recordings;s.length>0&&ee.size>0&&console.log("[AudioManager] Playback check - time:",r.toFixed(2),"playing:",i,"recordings:",s.length,"cached:",ee.size),s.forEach(a=>{const l=ee.get(a.id);if(!l){i&&console.log("[AudioManager] Audio not loaded yet for",a.id);return}if(!l.isReady){i&&console.log("[AudioManager] Audio not ready yet for",a.id);return}const u=l.element,f=l.duration||u.duration||a.duration,c=a.timecode,b=c+f;if(r>=c&&r<b&&i){const C=r-c;Math.abs(u.currentTime-C)>.5&&(console.log("[AudioManager] Seeking audio",a.id,"from",u.currentTime.toFixed(2),"to",C.toFixed(2)),u.currentTime=Math.max(0,Math.min(C,f))),u.paused&&(Ge&&Ge.state==="suspended"&&Ge.resume(),console.log("[AudioManager] Playing audio",a.id,"at offset",C.toFixed(2),"gain:",l.gainNode?.gain.value,"range:",c.toFixed(2),"-",b.toFixed(2)),u.play().then(()=>{console.log("[AudioManager] Play started successfully for",a.id)}).catch(S=>{console.error("[AudioManager] Audio play error:",S.message||S)}))}else u.paused||(console.log("[AudioManager] Pausing audio",a.id,"- out of range or not playing"),u.pause())})}),me(()=>{ee.forEach(r=>{r.element.pause(),r.element.src=""}),ee.clear(),ze.clear()}),null}var to=x('<div class="aero-dropdown absolute right-0 mt-2 w-72 py-2 z-50">'),no=x('<div class="aero-dropdown absolute right-0 mt-2 w-36 py-2 z-50"><button class="aero-dropdown-item w-full px-4 py-2.5 text-left text-sm text-slate-800">WAV</button><button class="aero-dropdown-item w-full px-4 py-2.5 text-left text-sm text-slate-800">MP3</button><button class="aero-dropdown-item w-full px-4 py-2.5 text-left text-sm text-slate-800">FLAC'),ro=x('<div class="absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center"><div class="aero-glass rounded-2xl p-8 max-w-md"><h2 class="text-2xl font-bold aero-title mb-6">Keyboard Shortcuts</h2><div class="grid grid-cols-2 gap-3 text-sm"><div class="flex items-center gap-3"><span class=aero-badge>Space</span><span class=text-slate-800>Play / Pause</span></div><div class="flex items-center gap-3"><span class=aero-badge>R</span><span class=text-slate-800>Record</span></div><div class="flex items-center gap-3"><span class=aero-badge>C</span><span class=text-slate-800>Add Character</span></div><div class="flex items-center gap-3"><span class=aero-badge>Left/Right</span><span class=text-slate-800>Seek 5s</span></div><div class="flex items-center gap-3"><span class=aero-badge>Shift+L/R</span><span class=text-slate-800>Seek 1s</span></div><div class="flex items-center gap-3"><span class=aero-badge>Up/Down</span><span class=text-slate-800>Select Character</span></div><div class="flex items-center gap-3"><span class=aero-badge>Home</span><span class=text-slate-800>Go to Start</span></div><div class="flex items-center gap-3"><span class=aero-badge>End</span><span class=text-slate-800>Go to End</span></div><div class="flex items-center gap-3"><span class=aero-badge>Scroll</span><span class=text-slate-800>Zoom Timeline</span></div><div class="flex items-center gap-3"><span class=aero-badge>?</span><span class=text-slate-800>Toggle Help</span></div></div><button class="aero-button aero-button-primary w-full mt-6 py-2.5 font-medium">Got it'),oo=x('<div class="absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center"><div class="aero-glass rounded-2xl p-8 w-80"><h2 class="text-xl font-bold aero-title mb-4">Add Character</h2><input type=text placeholder="Character name"autofocus class="aero-input w-full px-4 py-3 text-white mb-4"><div class="flex gap-3"><button class="aero-button flex-1 py-2.5 font-medium">Cancel</button><button class="aero-button aero-button-primary flex-1 py-2.5 font-medium">Add'),ao=x('<video class="max-h-full max-w-full rounded-xl shadow-2xl">'),io=x('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 20 20"><rect x=5 y=5 width=10 height=10 rx=1>'),lo=x('<button><span class="flex items-center gap-2"><span class="aero-badge ml-1">R'),so=x('<span class="text-slate-700 text-sm ml-2">Select a character to record'),co=x('<div class="h-16 flex items-center justify-center text-slate-700 text-sm"><span class="flex items-center gap-2">Press <span class=aero-badge>C</span> or click "+ Character" to add a character'),uo=x('<div class="shrink-0 aero-timeline overflow-visible"><div class="flex items-center justify-between gap-3 px-4 py-3 border-b border-white/5"><button class="aero-button aero-button-primary px-4 py-2 text-sm font-semibold"><span class="flex items-center gap-2"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Character<span class="aero-badge ml-1">C</span></span></button></div><div class="overflow-x-scroll scrollbar-hide"style=scrollbar-width:none;-ms-overflow-style:none><div style=min-width:100%;padding-left:24px;padding-right:24px><div></div><div class=relative><div class="h-4 bg-gradient-to-b from-transparent to-black/10">'),fo=x('<div class="flex flex-col h-screen bg-gradient-to-br from-[#0077b6] via-[#00b4d8] to-[#90e0ef]"><div class="aero-header flex items-center gap-4 p-4"><button class="aero-button p-2.5 text-slate-800 hover:text-white"><svg class="w-5 h-5"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"clip-rule=evenodd></path></svg></button><h1 class="text-xl font-bold aero-title"></h1><div class=flex-1></div><div class="flex items-center gap-2 px-3"><svg class="w-4 h-4 text-slate-700"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z"clip-rule=evenodd></path></svg><input type=range min=0 max=1 step=0.05 class="w-20 h-1 accent-[#00ff88] cursor-pointer"></div><div class="flex items-center gap-2 px-3"><svg class="w-4 h-4 text-slate-700"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z"clip-rule=evenodd></path></svg><span class="text-xs text-slate-600 w-12 text-right">dB</span><input type=range min=-12 max=12 step=0.5 class="w-16 h-1 accent-[#ffaa00] cursor-pointer"></div><button class="aero-button px-3 py-2 text-slate-800 hover:text-white text-sm"title="Keyboard shortcuts (?)"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button><div class=relative><button class="aero-button flex items-center gap-2 px-4 py-2 text-slate-800 text-sm font-medium"><svg class="w-4 h-4"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z"clip-rule=evenodd></path></svg><span class="max-w-32 truncate"></span><svg class="w-3 h-3"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"clip-rule=evenodd></path></svg></button></div><div class=relative><button class="aero-button aero-button-primary px-5 py-2 font-medium text-sm"><span class="flex items-center gap-2"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>Export</span></button></div></div><div class="flex-1 flex flex-col overflow-hidden"><div class="flex-1 flex items-center justify-center p-6 overflow-auto">'),ho=x('<svg class="w-4 h-4 shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),go=x('<button><div class="flex items-center gap-3"><span class=truncate>'),vo=x('<div class="aero-video-placeholder w-full max-w-2xl aspect-video flex flex-col items-center justify-center cursor-pointer"><div class="w-20 h-20 rounded-2xl bg-gradient-to-br from-[#00d4ff] to-[#00ff88] flex items-center justify-center mb-5 bubble-float"><svg class="w-10 h-10 text-white"fill=currentColor viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"></path></svg></div><span class="text-slate-800 text-lg font-medium mb-2">Click to select a video</span><span class="text-slate-600 text-sm">Drag and drop also supported'),mo=x('<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/20"><div class="w-3 h-3 rounded-full"></div><span class="text-sm font-medium text-slate-800 max-w-32 truncate">'),po=x('<svg class="w-4 h-4"fill=currentColor viewBox="0 0 20 20"><circle cx=10 cy=10 r=6>');const Gt=["#00ffcc","#00d4ff","#00ff88","#ffaa00","#ff7f7f","#cc99ff","#ffcc00","#ff99cc"],wo=20,xo=150,st=24,bo=280,$o=280,yo=450,Ut=5,Ft=1;function So(e){const[t,n]=m(null),[o,r]=m(""),[i,s]=m(0),[a,l]=m(0),[u,f]=m(!1),[c,b]=m(!1),[p,C]=m(null),[S,P]=m([]),[z,I]=m(null),[W,G]=m(!1),[K,he]=m(!1),[ce,pe]=m(50),[J,Oe]=m(0),[re,q]=m(!1),[se,te]=m(!1),[de,Re]=m(""),[Le,Te]=m(!1),[E,U]=m(void 0),[ne,oe]=m(1),[ue,fe]=m({}),[we,Be]=m({}),[Ce,Ye]=m(bo),[h,w]=m(0),[O,F]=m({});let M,T,ae;const B=()=>Math.max(a()*ce(),800),De=()=>Ce()+B()+st*2,ie=async()=>{const d=await Qn();if(n(d),d?.video){const v=await zt();r(v)}},vt=async()=>{const d=await nr();P(d||[]);const v=await tr();v?.id?I(v):d&&d.length>0&&I(d[0]);const k=await Zn();w(k||0)},Ve=async()=>{if(await lr()){await ie();const v=await zt();r(v)}},Qe=()=>{Re(""),te(!0)},Ze=async()=>{const d=de().trim();if(!d)return;const v=Gt[Math.floor(Math.random()*Gt.length)];await Un(d,v),await ie(),te(!1),Re("")},je=async(d,v,k)=>{await dr(d,v,k),await ie()},mt=async d=>{await Xn(d),p()===d&&C(null),await ie()},_=async()=>{if(!p()){alert("Select a character first");return}c()?(await cr(),M&&M.pause()):Te(!0)},et=async()=>{Te(!1);const d=p();if(!d)return;const v=i();U(v),b(!0),M&&M.play(),await ar(d,v),U(void 0),await ie()},tt=()=>{Te(!1)},nt=async d=>{await Jn(d),await ie()},rt=async(d,v)=>{await hr(d,v),await ie()},ot=(d,v)=>{fe(k=>({...k,[d]:v}))},at=d=>{Be(v=>({...v,[d]:!v[d]}))},Zt=async(d,v)=>{await gr(d,v),await ie()},en=async(d,v)=>{F(k=>({...k,[d]:v})),await fr(d,v),await ie()},tn=async d=>{w(d),await sr(d)},pt=async d=>{he(!1);const v=await qn(d);v&&alert(`Exported to: ${v}`)},nn=async d=>{await ir(d.id),I(d),G(!1)},rn=()=>{M&&l(M.duration)},on=()=>{M&&s(M.currentTime)},Ne=d=>{M&&(M.currentTime=d,s(d))},kt=()=>{!M||c()||(M.paused?M.play():M.pause())},an=d=>{if(!d.shiftKey&&T){d.preventDefault();const v=d.deltaY>0?-5:5,k=ce(),Y=Math.max(wo,Math.min(xo,k+v));if(Y!==k){const it=i()*k+st-T.scrollLeft;pe(Y);const wt=i()*Y+st;T.scrollLeft=wt-it}}},ln=()=>{T&&Oe(T.scrollLeft)},sn=d=>{if(!ae||!T)return;const v=d.target;if(v.closest(".playhead")||v.closest(".character-sidebar"))return;const k=ae.getBoundingClientRect(),ge=(d.clientX-k.left-Ce())/ce();Ne(Math.max(0,Math.min(ge,a())))},cn=d=>{const v=Math.max($o,Math.min(yo,d));Ye(v)},dn=()=>a()>0?i()/a():0,un=d=>{Ne(d*a())},fn=d=>{Ne(d)},hn=()=>{const d=t()?.characters||[];if(d.length===0)return;const v=p(),k=d.findIndex(ge=>ge.id===v),Y=k<0?0:(k+1)%d.length;C(d[Y].id)},gn=()=>{const d=t()?.characters||[];if(d.length===0)return;const v=p(),k=d.findIndex(ge=>ge.id===v),Y=k<=0?d.length-1:k-1;C(d[Y].id)},Mt=d=>{if(d.target.tagName!=="INPUT")switch(d.code){case"Space":o()&&(d.preventDefault(),kt());break;case"KeyR":p()&&(d.preventDefault(),_());break;case"KeyC":d.preventDefault(),Qe();break;case"ArrowLeft":d.preventDefault(),Ne(Math.max(0,i()-(d.shiftKey?Ft:Ut)));break;case"ArrowRight":d.preventDefault(),Ne(Math.min(a(),i()+(d.shiftKey?Ft:Ut)));break;case"ArrowUp":d.preventDefault(),gn();break;case"ArrowDown":d.preventDefault(),hn();break;case"Home":d.preventDefault(),Ne(0);break;case"End":d.preventDefault(),Ne(a());break;case"Slash":d.shiftKey&&(d.preventDefault(),q(!re()));break;case"Escape":q(!1),G(!1),he(!1);break}},vn=async()=>{await Fn(),e.onClose()};Bt("recording-started",()=>{b(!0)}),Bt("recording-stopped",()=>{b(!1),U(void 0)}),An(()=>{ie(),vt(),window.addEventListener("keydown",Mt)}),me(()=>{window.removeEventListener("keydown",Mt)}),le(()=>{if(!T||!u())return;const d=i()*ce()+st,v=T.clientWidth,k=v*.3,Y=Math.max(0,d-k),ge=De()-v;Y<=ge&&(T.scrollLeft=Y)});const mn=d=>t()?.recordings?.filter(v=>v.character_id===d)||[],pn=Me(()=>{const d=[];for(const v of t()?.characters||[])for(const k of t()?.recordings?.filter(Y=>Y.character_id===v.id)||[])d.push(k.timecode),d.push(k.timecode+k.duration);return[...new Set(d)].sort((v,k)=>v-k)});return(()=>{var d=fo(),v=d.firstChild,k=v.firstChild,Y=k.nextSibling,ge=Y.nextSibling,it=ge.nextSibling,wt=it.firstChild,xt=wt.nextSibling,At=it.nextSibling,wn=At.firstChild,lt=wn.nextSibling,Pt=lt.firstChild,bt=lt.nextSibling,Et=At.nextSibling,$t=Et.nextSibling,Rt=$t.firstChild,xn=Rt.firstChild,bn=xn.nextSibling,Lt=$t.nextSibling,$n=Lt.firstChild,He=v.nextSibling,yn=He.firstChild;return k.$$click=vn,g(Y,()=>t()?.title||"Loading..."),xt.$$input=$=>oe(parseFloat($.currentTarget.value)),g(lt,()=>h()>=0?"+":"",Pt),g(lt,()=>h().toFixed(1),Pt),bt.$$input=$=>tn(parseFloat($.currentTarget.value)),Et.$$click=()=>q(!re()),Rt.$$click=()=>G(!W()),g(bn,()=>z()?.devices_name||"Select Mic"),g($t,y(j,{get when(){return W()},get children(){var $=to();return g($,y(Ue,{get each(){return S()},children:R=>(()=>{var H=go(),X=H.firstChild,xe=X.firstChild;return H.$$click=()=>nn(R),g(X,y(j,{get when(){return z()?.id===R.id},get children(){return ho()}}),xe),g(xe,()=>R.devices_name),A(()=>Ke(H,`aero-dropdown-item w-full px-4 py-2.5 text-left text-sm ${z()?.id===R.id?"text-[#004d40] font-bold":"text-slate-800"}`)),H})()})),$}}),null),$n.$$click=()=>he(!K()),g(Lt,y(j,{get when(){return K()},get children(){var $=no(),R=$.firstChild,H=R.nextSibling,X=H.nextSibling;return R.$$click=()=>pt("wav"),H.$$click=()=>pt("mp3"),X.$$click=()=>pt("flac"),$}}),null),g(d,y(j,{get when(){return re()},get children(){var $=ro(),R=$.firstChild,H=R.firstChild,X=H.nextSibling,xe=X.nextSibling;return $.$$click=()=>q(!1),R.$$click=_e=>_e.stopPropagation(),xe.$$click=()=>q(!1),$}}),He),g(d,y(j,{get when(){return se()},get children(){var $=oo(),R=$.firstChild,H=R.firstChild,X=H.nextSibling,xe=X.nextSibling,_e=xe.firstChild,be=_e.nextSibling;return $.$$click=()=>te(!1),R.$$click=$e=>$e.stopPropagation(),X.$$keydown=$e=>{$e.key==="Enter"&&Ze(),$e.key==="Escape"&&te(!1)},X.$$input=$e=>Re($e.currentTarget.value),_e.$$click=()=>te(!1),be.$$click=Ze,A(()=>X.value=de()),$}}),He),g(d,y(j,{get when(){return Le()},get children(){return y(Yr,{onComplete:et,onCancel:tt})}}),He),g(yn,y(j,{get when(){return o()},get fallback(){return(()=>{var $=vo();return $.$$click=Ve,$})()},get children(){var $=ao();$.addEventListener("pause",()=>f(!1)),$.addEventListener("play",()=>f(!0)),$.addEventListener("timeupdate",on),$.addEventListener("loadedmetadata",rn);var R=M;return typeof R=="function"?Ie(R,$):M=$,A(()=>ke($,"src",o())),$}})),g(He,y(j,{get when(){return o()},get children(){var $=uo(),R=$.firstChild,H=R.firstChild,X=R.nextSibling,xe=X.firstChild,_e=xe.firstChild,be=_e.nextSibling,$e=be.firstChild;g(R,y(Mr,{videoRef:M,get isPlaying(){return u()},get currentTime(){return i()},get duration(){return a()},onPlayPause:kt}),H),H.$$click=Qe,g(R,y(j,{get when(){return p()},get children(){return[ye(()=>(()=>{const L=t()?.characters?.find(Z=>Z.id===p());return(()=>{var Z=mo(),ve=Z.firstChild,Sn=ve.nextSibling;return g(Sn,()=>L?.name),A(Mo=>N(ve,"background-color",L?.color)),Z})()})()),(()=>{var L=lo(),Z=L.firstChild,ve=Z.firstChild;return L.$$click=_,g(Z,y(j,{get when(){return c()},get fallback(){return po()},get children(){return io()}}),ve),g(Z,()=>c()?"Stop":"Record",ve),A(()=>Ke(L,`aero-button px-5 py-2 text-sm font-semibold ${c()?"aero-button-record recording":"aero-button-record"}`)),L})()]}}),null),g(R,y(j,{get when(){return ye(()=>!p())()&&(t()?.characters?.length||0)>0},get children(){return so()}}),null),X.addEventListener("scroll",ln),X.addEventListener("wheel",an);var Tt=T;typeof Tt=="function"?Ie(Tt,X):T=X,g(_e,y(Rr,{get duration(){return a()},get width(){return B()},onClick:fn})),be.$$click=sn;var Dt=ae;return typeof Dt=="function"?Ie(Dt,be):ae=be,g(be,y(Ue,{get each(){return t()?.characters||[]},children:L=>y(Jr,{character:L,get recordings(){return mn(L.id)},get duration(){return a()},get pixelsPerSecond(){return ce()},get isRecording(){return ye(()=>!!c())()&&p()===L.id},get selectedCharacterId(){return p()},get currentTime(){return i()},get recordingStartTime(){return ye(()=>p()===L.id)()?E():void 0},get volume(){return ue()[L.id]??1},get isMuted(){return we()[L.id]??!1},get sidebarWidth(){return Ce()},onSidebarResize:cn,onSelect:()=>C(L.id),onUpdateCharacter:(Z,ve)=>je(L.id,Z,ve),onDeleteCharacter:()=>mt(L.id),onDeleteRecording:nt,onMoveRecording:rt,onVolumeChange:Z=>ot(L.id,Z),onMuteToggle:()=>at(L.id),onRecordingVolumeChange:Zt,onRecordingGainChange:en})}),$e),g(be,y(j,{get when(){return(t()?.characters?.length||0)===0},get children(){return co()}}),$e),g(be,y(Tr,{get position(){return dn()},onDrag:un,containerRef:ae,get trackWidth(){return B()},get sidebarWidth(){return Ce()},get snapPoints(){return pn()},get duration(){return a()}}),null),g($,y(Vr,{scrollRef:T,get contentWidth(){return De()},get scrollPos(){return J()}}),null),g($,y(eo,{get recordings(){return t()?.recordings||[]},get currentTime(){return i()},get isPlaying(){return u()},get masterVolume(){return ne()},get characterVolumes(){return ue()},get mutedCharacters(){return we()},get recordingGains(){return O()}}),null),A(L=>{var Z=`${De()}px`,ve=`${Ce()}px`;return Z!==L.e&&N(xe,"width",L.e=Z),ve!==L.t&&N(_e,"margin-left",L.t=ve),L},{e:void 0,t:void 0}),$}}),null),A($=>{var R=`Master Volume: ${Math.round(ne()*100)}%`,H=`Mic Gain: ${h().toFixed(1)} dB`;return R!==$.e&&ke(xt,"title",$.e=R),H!==$.t&&ke(bt,"title",$.t=H),$},{e:void 0,t:void 0}),A(()=>xt.value=ne()),A(()=>bt.value=h()),d})()}Ee(["click","input","keydown"]);var Co=x('<div class="h-screen w-full overflow-hidden"><div class=aero-bg-bubbles><div class=aero-bubble-decoration></div><div class=aero-bubble-decoration></div><div class=aero-bubble-decoration></div><div class=aero-bubble-decoration></div><div class=aero-bubble-decoration></div><div class=aero-bubble-decoration>');function _o(){const[e,t]=m("list"),[n,o]=m(null),r=async s=>{await or(s),o(s),t("editor")},i=()=>{o(null),t("list")};return(()=>{var s=Co();return s.firstChild,g(s,y(j,{get when(){return e()==="list"},get children(){return y(br,{onOpenProject:r})}}),null),g(s,y(j,{get when(){return ye(()=>e()==="editor")()&&n()},get children(){return y(So,{get projectId(){return n()},onClose:i})}}),null),s})()}const ko=document.getElementById("root");In(()=>y(_o,{}),ko);
